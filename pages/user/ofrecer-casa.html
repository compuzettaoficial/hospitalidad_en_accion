!DOCTYPE html
html lang=es
head
    meta charset=UTF-8
    meta name=viewport content=width=device-width, initial-scale=1.0
    titleOfrecer mi Casa - Hospitalidad en Accióntitle
    
    !-- Favicon --
    link rel=icon href=....assetsimagesbrandingfavicon.ico
    
    !-- CSS --
    link rel=stylesheet href=....assetscssmain.css
    link rel=stylesheet href=....assetscsscomponents.css
    link rel=stylesheet href=....assetscssresponsive.css
    
    !-- Font Awesome --
    link rel=stylesheet href=httpscdnjs.cloudflare.comajaxlibsfont-awesome6.4.0cssall.min.css
    
    style
        .form-page {
            background var(--color-bg-light);
            min-height 100vh;
            padding 100px 0 var(--spacing-xl);
        }
        
        .form-header {
            background linear-gradient(135deg, var(--color-secondary), var(--color-primary));
            color white;
            padding var(--spacing-xl) 0;
            margin-bottom var(--spacing-xl);
            text-align center;
        }
        
        .form-header h1 {
            font-size 2rem;
            margin-bottom var(--spacing-sm);
        }
        
        .form-header p {
            font-size 1.1rem;
            opacity 0.9;
        }
        
        .form-container {
            max-width 800px;
            margin 0 auto;
        }
        
        .form-card {
            background white;
            border-radius var(--border-radius-lg);
            padding var(--spacing-xl);
            box-shadow var(--shadow-lg);
        }
        
        .form-section {
            margin-bottom var(--spacing-xl);
            padding-bottom var(--spacing-xl);
            border-bottom 2px solid var(--color-bg-light);
        }
        
        .form-sectionlast-child {
            border-bottom none;
            margin-bottom 0;
        }
        
        .section-title {
            font-size 1.3rem;
            color var(--color-accent);
            margin-bottom var(--spacing-md);
            display flex;
            align-items center;
            gap var(--spacing-sm);
        }
        
        .section-title i {
            color var(--color-secondary);
        }
        
        .form-row {
            display grid;
            grid-template-columns repeat(2, 1fr);
            gap var(--spacing-md);
        }
        
        .info-box {
            background rgba(86, 180, 160, 0.1);
            border-left 4px solid var(--color-secondary);
            padding var(--spacing-md);
            border-radius var(--border-radius-md);
            margin-bottom var(--spacing-lg);
        }
        
        .info-box p {
            margin 0;
            color var(--color-text-dark);
            font-size 0.95rem;
            line-height 1.6;
        }
        
        .info-box i {
            color var(--color-secondary);
            margin-right var(--spacing-xs);
        }
        
        .counter-input {
            display flex;
            align-items center;
            gap var(--spacing-sm);
        }
        
        .counter-btn {
            width 40px;
            height 40px;
            border 2px solid var(--color-secondary);
            background white;
            color var(--color-secondary);
            border-radius var(--border-radius-md);
            font-size 1.2rem;
            cursor pointer;
            transition all var(--transition-base);
        }
        
        .counter-btnhover {
            background var(--color-secondary);
            color white;
        }
        
        .counter-value {
            font-size 1.5rem;
            font-weight 700;
            color var(--color-secondary);
            min-width 40px;
            text-align center;
        }
        
        .servicios-grid {
            display grid;
            grid-template-columns repeat(2, 1fr);
            gap var(--spacing-sm);
        }
        
        .servicio-checkbox {
            background var(--color-bg-light);
            padding var(--spacing-sm) var(--spacing-md);
            border-radius var(--border-radius-md);
            display flex;
            align-items center;
            gap var(--spacing-sm);
            cursor pointer;
            transition all var(--transition-base);
        }
        
        .servicio-checkboxhover {
            background rgba(86, 180, 160, 0.1);
            border 1px solid var(--color-secondary);
        }
        
        .servicio-checkbox inputchecked + label {
            color var(--color-secondary);
            font-weight 600;
        }
        
        .form-actions {
            display flex;
            gap var(--spacing-md);
            justify-content flex-end;
            margin-top var(--spacing-xl);
        }
        
        @media (max-width 768px) {
            .form-page {
                padding-top 80px;
            }
            
            .form-header h1 {
                font-size 1.5rem;
            }
            
            .form-card {
                padding var(--spacing-lg);
            }
            
            .form-row {
                grid-template-columns 1fr;
            }
            
            .servicios-grid {
                grid-template-columns 1fr;
            }
            
            .form-actions {
                flex-direction column;
            }
        }
    style
head
body
    
    !-- HEADER --
    header class=header
        div class=container
            nav class=navbar
                div class=navbar-brand
                    img src=....assetsimagesbrandinglogo.png alt=Logo class=logo
                    span class=brand-nameHospitalidad en Acciónspan
                div
                
                button class=navbar-toggle id=navbarToggle
                    i class=fas fa-barsi
                button
                
                ul class=navbar-menu id=navbarMenu
                    lia href=....index.htmlInicioali
                    lia href=..eventos.htmlEventosali
                    lia href=perfil.htmlMi Cuentaali
                    lia href=# id=logoutBtn class=btn-login
                        i class=fas fa-sign-out-alti Cerrar Sesión
                    ali
                ul
            nav
        div
    header

    !-- FORM HEADER --
    div class=form-header
        div class=container
            h1i class=fas fa-homei Ofrecer mi Casah1
            pSé parte del ministerio de hospitalidad hospedando a hermanos que vienen de lejosp
        div
    div

    !-- FORM CONTENT --
    div class=form-page
        div class=container
            div class=form-container
                
                !-- Breadcrumbs --
                div class=breadcrumbs style=margin-bottom var(--spacing-lg);
                    a href=....index.htmlInicioa
                    span class=separatorspan
                    a href=..eventos.htmlEventosa
                    span class=separatorspan
                    spanOfrecer Casaspan
                div
                
                !-- Alerts --
                div id=alertContainerdiv
                
                !-- Info Box --
                div class=info-box
                    p
                        i class=fas fa-hearti
                        strong¡Gracias por tu corazón generoso!strong Al ofrecer tu casa, estás siendo 
                        instrumento de bendición para hermanos que necesitan un lugar donde hospedarse. 
                        Revisaremos tu solicitud y te contactaremos pronto.
                    p
                div
                
                !-- Formulario --
                div class=form-card
                    form id=ofrecerForm
                        
                        !-- SECCIÓN 1 EVENTO --
                        div class=form-section
                            h3 class=section-title
                                i class=fas fa-calendari
                                ¿Para qué Evento
                            h3
                            
                            div class=form-group
                                label for=eventoId class=form-label requiredSelecciona el Eventolabel
                                select id=eventoId class=form-select required
                                    option value=Cargando eventos...option
                                select
                            div
                            
                            div id=eventoInfo style=display none; margin-top var(--spacing-md);
                                !-- Se carga dinámicamente --
                            div
                        div
                        
                        !-- SECCIÓN 2 DATOS PERSONALES --
                        div class=form-section
                            h3 class=section-title
                                i class=fas fa-useri
                                Tus Datos
                            h3
                            
                            div class=form-row
                                div class=form-group
                                    label for=nombre class=form-label requiredNombre Completolabel
                                    input type=text id=nombre class=form-input required
                                div
                                
                                div class=form-group
                                    label for=telefono class=form-label requiredTeléfono  WhatsApplabel
                                    input type=tel id=telefono class=form-input placeholder=+51 999 888 777 required
                                div
                            div
                            
                            div class=form-group
                                label for=email class=form-label requiredCorreo Electrónicolabel
                                input type=email id=email class=form-input required
                            div
                        div
                        
                        !-- SECCIÓN 3 UBICACIÓN --
                        div class=form-section
                            h3 class=section-title
                                i class=fas fa-map-marker-alti
                                Ubicación de tu Casa
                            h3
                            
                            div class=form-group
                                label for=direccion class=form-label requiredDirección Completalabel
                                input type=text id=direccion class=form-input placeholder=CalleAv., número, urbanización required
                            div
                            
                            div class=form-group
                                label for=distrito class=form-label requiredDistritolabel
                                input type=text id=distrito class=form-input required
                            div
                            
                            div class=form-group
                                label for=referencias class=form-labelReferenciaslabel
                                input type=text id=referencias class=form-input placeholder=Cerca de..., frente a...
                            div
                            
                            div class=form-group
                                label for=distanciaEvento class=form-labelDistancia al Evento (aproximada)label
                                input type=text id=distanciaEvento class=form-input placeholder=Ej 2 km, 15 minutos en auto
                            div
                        div
                        
                        !-- SECCIÓN 4 CAPACIDAD --
                        div class=form-section
                            h3 class=section-title
                                i class=fas fa-bedi
                                Capacidad de Hospedaje
                            h3
                            
                            div class=form-group
                                label class=form-label required¿Cuántas personas puedes hospedarlabel
                                div class=counter-input
                                    button type=button class=counter-btn id=btnMenos-button
                                    span class=counter-value id=capacidadNum1span
                                    button type=button class=counter-btn id=btnMas+button
                                div
                                input type=hidden id=capacidad value=1
                            div
                            
                            div class=form-row
                                div class=form-group
                                    label for=habitacionesDisponibles class=form-label requiredHabitaciones Disponibleslabel
                                    input type=number id=habitacionesDisponibles class=form-input min=1 value=1 required
                                div
                                
                                div class=form-group
                                    label for=camasDisponibles class=form-label requiredCamasColchones Disponibleslabel
                                    input type=number id=camasDisponibles class=form-input min=1 value=1 required
                                div
                            div
                        div
                        
                        !-- SECCIÓN 5 PREFERENCIAS --
                        div class=form-section
                            h3 class=section-title
                                i class=fas fa-user-checki
                                Preferencias
                            h3
                            
                            div class=form-group
                                label for=generoPreferencia class=form-label requiredPreferencia de Génerolabel
                                select id=generoPreferencia class=form-select required
                                    option value=indiferenteIndiferenteoption
                                    option value=masculinoSolo hombresoption
                                    option value=femeninoSolo mujeresoption
                                    option value=familiaFamiliasParejasoption
                                select
                            div
                            
                            div class=form-row
                                div class=form-group
                                    label class=form-checkbox
                                        input type=checkbox id=aceptaNinos
                                        spanAcepto niñosspan
                                    label
                                div
                                
                                div class=form-group
                                    label class=form-checkbox
                                        input type=checkbox id=aceptaMascotas
                                        spanAcepto mascotasspan
                                    label
                                div
                            div
                        div
                        
                        !-- SECCIÓN 6 SERVICIOS --
                        div class=form-section
                            h3 class=section-title
                                i class=fas fa-list-checki
                                Servicios Disponibles
                            h3
                            
                            div class=servicios-grid
                                label class=servicio-checkbox
                                    input type=checkbox class=servicio value=WiFi
                                    spani class=fas fa-wifii WiFispan
                                label
                                label class=servicio-checkbox
                                    input type=checkbox class=servicio value=Estacionamiento
                                    spani class=fas fa-cari Estacionamientospan
                                label
                                label class=servicio-checkbox
                                    input type=checkbox class=servicio value=Desayuno incluido
                                    spani class=fas fa-mug-hoti Desayunospan
                                label
                                label class=servicio-checkbox
                                    input type=checkbox class=servicio value=Lavandería
                                    spani class=fas fa-tshirti Lavanderíaspan
                                label
                                label class=servicio-checkbox
                                    input type=checkbox class=servicio value=Baño privado
                                    spani class=fas fa-bathi Baño privadospan
                                label
                                label class=servicio-checkbox
                                    input type=checkbox class=servicio value=Aire acondicionado
                                    spani class=fas fa-windi Aire acondicionadospan
                                label
                                label class=servicio-checkbox
                                    input type=checkbox class=servicio value=Cocina disponible
                                    spani class=fas fa-utensilsi Cocinaspan
                                label
                                label class=servicio-checkbox
                                    input type=checkbox class=servicio value=Transporte al evento
                                    spani class=fas fa-busi Transportespan
                                label
                            div
                        div
                        
                        !-- SECCIÓN 7 INFORMACIÓN ADICIONAL --
                        div class=form-section
                            h3 class=section-title
                                i class=fas fa-info-circlei
                                Información Adicional
                            h3
                            
                            div class=form-row
                                div class=form-group
                                    label for=iglesia class=form-labelTu Iglesialabel
                                    input type=text id=iglesia class=form-input
                                div
                                
                                div class=form-group
                                    label for=aniosIglesia class=form-labelAños en la Iglesialabel
                                    input type=number id=aniosIglesia class=form-input min=0 placeholder=0
                                div
                            div
                            
                            div class=form-group
                                label for=experienciaHospitalidad class=form-label¿Has hospedado anteslabel
                                textarea id=experienciaHospitalidad class=form-textarea rows=3 placeholder=Cuéntanos tu experiencia previa hospedando (opcional)textarea
                            div
                            
                            div class=form-group
                                label for=comentarios class=form-labelComentarios Adicionaleslabel
                                textarea id=comentarios class=form-textarea rows=4 placeholder=Cualquier información adicional que quieras compartir...textarea
                            div
                        div
                        
                        !-- ACCIONES --
                        div class=form-actions
                            a href=..eventos.html class=btn btn-outline
                                i class=fas fa-timesi Cancelar
                            a
                            button type=submit class=btn btn-primary id=btnEnviar style=background var(--color-secondary); border-color var(--color-secondary);
                                i class=fas fa-paper-planei Enviar Postulación
                            button
                        div
                        
                    form
                div
                
            div
        div
    div

    !-- Firebase SDK --
    script src=httpswww.gstatic.comfirebasejs9.22.0firebase-app-compat.jsscript
    script src=httpswww.gstatic.comfirebasejs9.22.0firebase-firestore-compat.jsscript
    script src=httpswww.gstatic.comfirebasejs9.22.0firebase-auth-compat.jsscript
    
    !-- Configuración Firebase --
    script src=....assetsjsconfigfirebase-config.jsscript
    
    !-- Services --
    script src=....assetsjsservicesauth.service.jsscript
    script src=....assetsjsserviceseventos.service.jsscript
    script src=....assetsjsserviceshospitalidad.service.jsscript
    
    script
         Proteger página
        AuthService.protectPage('..authlogin.html');
        
        let eventoSeleccionado = null;
        let userData = null;
        
         Cargar datos del usuario
        async function cargarDatosUsuario() {
            userData = await AuthService.getCurrentUserData();
            
            if (userData) {
                document.getElementById('nombre').value = userData.nombre  '';
                document.getElementById('email').value = userData.email  '';
                document.getElementById('telefono').value = userData.telefono  '';
            }
        }
        
         Cargar eventos
        async function cargarEventos() {
            try {
                const eventos = await EventosService.getEventosActivos();
                const select = document.getElementById('eventoId');
                
                if (eventos.length === 0) {
                    select.innerHTML = 'option value=No hay eventos disponiblesoption';
                    return;
                }
                
                select.innerHTML = 'option value=Selecciona un eventooption' +
                    eventos.map(e = `option value=${e.id}${e.titulo} - ${e.ciudad}option`).join('');
                
                 Si viene eventoId por URL
                const urlParams = new URLSearchParams(window.location.search);
                const eventoId = urlParams.get('eventoId');
                if (eventoId) {
                    select.value = eventoId;
                    select.dispatchEvent(new Event('change'));
                }
                
            } catch (error) {
                console.error('Error al cargar eventos', error);
            }
        }
        
         Mostrar info del evento
        document.getElementById('eventoId').addEventListener('change', async (e) = {
            const eventoId = e.target.value;
            
            if (!eventoId) {
                document.getElementById('eventoInfo').style.display = 'none';
                return;
            }
            
            eventoSeleccionado = await EventosService.getEventoById(eventoId);
            
            if (eventoSeleccionado) {
                document.getElementById('eventoInfo').innerHTML = `
                    div style=background var(--color-bg-light); padding var(--spacing-md); border-radius var(--border-radius-md);
                        strong${eventoSeleccionado.titulo}strongbr
                        span style=color var(--color-text-light);
                            ${EventosService.formatearRangoFechas(eventoSeleccionado.fechaInicio, eventoSeleccionado.fechaFin)}
                            • ${eventoSeleccionado.lugar}
                        span
                    div
                `;
                document.getElementById('eventoInfo').style.display = 'block';
            }
        });
        
         Contador de capacidad
        let capacidad = 1;
        
        document.getElementById('btnMenos').addEventListener('click', () = {
            if (capacidad  1) {
                capacidad--;
                actualizarCapacidad();
            }
        });
        
        document.getElementById('btnMas').addEventListener('click', () = {
            if (capacidad  20) {
                capacidad++;
                actualizarCapacidad();
            }
        });
        
        function actualizarCapacidad() {
            document.getElementById('capacidadNum').textContent = capacidad;
            document.getElementById('capacidad').value = capacidad;
        }
        
         Enviar formulario
        document.getElementById('ofrecerForm').addEventListener('submit', async (e) = {
            e.preventDefault();
            
             Recopilar servicios seleccionados
            const servicios = [];
            document.querySelectorAll('.serviciochecked').forEach(checkbox = {
                servicios.push(checkbox.value);
            });
            
             Preparar datos
            const datos = {
                eventoId document.getElementById('eventoId').value,
                nombre document.getElementById('nombre').value.trim(),
                email document.getElementById('email').value.trim(),
                telefono document.getElementById('telefono').value.trim(),
                direccion document.getElementById('direccion').value.trim(),
                distrito document.getElementById('distrito').value.trim(),
                referencias document.getElementById('referencias').value.trim(),
                distanciaEvento document.getElementById('distanciaEvento').value.trim(),
                capacidad capacidad,
                habitacionesDisponibles parseInt(document.getElementById('habitacionesDisponibles').value),
                camasDisponibles parseInt(document.getElementById('camasDisponibles').value),
                generoPreferencia document.getElementById('generoPreferencia').value,
                aceptaNinos document.getElementById('aceptaNinos').checked,
                aceptaMascotas document.getElementById('aceptaMascotas').checked,
                servicios servicios,
                iglesia document.getElementById('iglesia').value.trim(),
                aniosIglesia document.getElementById('aniosIglesia').value.trim(),
                experienciaHospitalidad document.getElementById('experienciaHospitalidad').value.trim(),
                comentarios document.getElementById('comentarios').value.trim()
            };
            
             Deshabilitar botón
            const btnEnviar = document.getElementById('btnEnviar');
            btnEnviar.disabled = true;
            btnEnviar.innerHTML = 'i class=fas fa-spinner fa-spini Enviando...';
            
            try {
                const result = await HospitalidadService.postularComoAnfitrion(datos);
                
                if (result.success) {
                    showAlert('¡Postulación enviada exitosamente! Gracias por tu corazón generoso.', 'success');
                    
                    setTimeout(() = {
                        window.location.href = 'mis-postulaciones.html';
                    }, 2000);
                    
                } else {
                    showAlert(result.error, 'error');
                    btnEnviar.disabled = false;
                    btnEnviar.innerHTML = 'i class=fas fa-paper-planei Enviar Postulación';
                }
                
            } catch (error) {
                console.error('Error', error);
                showAlert('Error al enviar la postulación. Por favor intenta nuevamente.', 'error');
                btnEnviar.disabled = false;
                btnEnviar.innerHTML = 'i class=fas fa-paper-planei Enviar Postulación';
            }
        });
        
         Cerrar sesión
        document.getElementById('logoutBtn').addEventListener('click', async (e) = {
            e.preventDefault();
            await AuthService.logout();
            window.location.href = '....index.html';
        });
        
         Menú móvil
        document.getElementById('navbarToggle').addEventListener('click', () = {
            document.getElementById('navbarMenu').classList.toggle('active');
        });
        
         Mostrar alert
        function showAlert(message, type = 'error') {
            const container = document.getElementById('alertContainer');
            container.innerHTML = `
                div class=alert alert-${type} style=margin-bottom var(--spacing-lg);
                    i class=fas fa-${type === 'success'  'check-circle'  'exclamation-circle'}i
                    ${message}
                div
            `;
            container.scrollIntoView({ behavior 'smooth', block 'nearest' });
            
            if (type !== 'success') {
                setTimeout(() = container.innerHTML = '', 5000);
            }
        }
        
         Inicializar
        document.addEventListener('DOMContentLoaded', () = {
            cargarDatosUsuario();
            cargarEventos();
        });
    script
body
html